#include <stdio.h>

#define MAX 80

/* Lecture d'une ligne de texte tapee au clavier
 * ch : adresse du premier caractere de la chaine
 * NbCarMax : nombre maximal de caracteres lus (pour eviter les
 *   debordements en memoire)
 * Valeur de retour : nombre de caracteres lus
 */
int Lecture(char *ch, int NbCarMax)
{
    int i = 0;
    char c;

    c = getchar();
    while (c != '\n' && i < NbCarMax) {
        ch[i] = c;
        i++;
        c = getchar();
    }
    ch[i] = '\0';  // fin de chaîne
    return i;       // nombre de caractères lus (hors '\n')
}

/* Longueur d'une chaine de caracteres */
int Longueur(char *ch)
{
    int i = 0;
    while (ch[i] != '\0') {
        i++;
    }
    return i;
}

/* Copie d'une chaine dans une autre */
void Copie(char *Destination, char *Source)
{
    int i = 0;
    while (Source[i] != '\0') {
        Destination[i] = Source[i];
        i++;
    }
    Destination[i] = '\0';
}

/* Comparaison de deux chaines de caracteres
 * retourne 1 si differentes, 0 si identiques
 */
int Differentes(char *ch1, char *ch2)
{
    int i = 0;
    while (ch1[i] != '\0' && ch2[i] != '\0') {
        if (ch1[i] != ch2[i]) {
            return 1;
        }
        i++;
    }
    if (ch1[i] == '\0' && ch2[i] == '\0') {
        return 0;  // identiques
    } else {
        return 1;  // longueurs differentes
    }
}

/* Ajout (concatenation) d'une chaine a la fin d'une autre */
void Ajout(char *Destination, char *Source)
{
    int i = 0;
    int j = 0;

    while (Destination[i] != '\0') {
        i++;
    }
    while (Source[j] != '\0') {
        Destination[i] = Source[j];
        i++;
        j++;
    }
    Destination[i] = '\0';
}

/* Fonction principale (tests) */
int main(void)
{
  printf("Test de Lecture\n---------------\n");
  printf("Tapez une chaine d'au plus %d caracteres : ",MAX);
  char ch1[MAX+1];
  int n;
  n=Lecture(ch1,MAX);
  printf("La chaine \"%s\" a ete lue ; elle contient %d caracteres.\n",ch1,n);

  printf("\nTest de Longueur\n----------------\n");
  printf("La chaine \"%s\" contient %d caracteres.\n",ch1,Longueur(ch1));

  printf("\nTest de copie\n-------------\n");
  char ch2[2*MAX+1];
  Copie(ch2,ch1);
  printf("ch1=\"%s\", ch2=\"%s\"\n",ch1,ch2);

  printf("\nTest de Differentes\n-------------------\n");
  char ch3[MAX+1]="o";
  while (Differentes(ch3,"n"))
  {
    printf("Tapez une premiere chaine : ");
    Lecture(ch1,MAX);
    printf("Tapez une seconde chaine : ");
    Lecture(ch2,MAX);
    if (Differentes(ch1,ch2))
      printf("%s et %s ne contiennent pas les memes caracteres.\n",ch1,ch2);
    else
      printf("%s et %s contiennent les memes caracteres.\n",ch1,ch2);
    printf("Voulez-vous continuer le test de Differentes (tapez n pour arreter) : ");
    Lecture(ch3,1);
  }

  printf("\nTest de Ajout\n-------------\n");
  Copie(ch3,"o");
  while (Differentes(ch3,"n"))
  {
    printf("Tapez une premiere chaine : ");
    Lecture(ch1,MAX);
    printf("Tapez une seconde chaine : ");
    Lecture(ch2,MAX);
    printf("Ajout de la premiere chaine a la seconde :\n");
    Ajout(ch2,ch1);
    printf("ch1=\"%s\", ch2=\"%s\"\n",ch1,ch2);
    printf("Voulez-vous continuer le test de Ajout (tapez n pour arreter) : ");
    Lecture(ch3,1);
  }

  return 0;
}